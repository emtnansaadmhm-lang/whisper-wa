<!-- ================= HEADER ================= -->
<header class="topbar">
  <div class="left">
    <!-- Back button -->
    <button class="icon-btn" id="btnBack" type="button" title="Back">
      <i class="fa-solid fa-arrow-left"></i>
    </button>

    <div class="brand">
      <img src="logo.png" class="logo" alt="Whisper-WA Logo" />
      <div class="brand-text">
        <b>Whisper-WA</b>
        <span>Digital Forensics Platform</span>
      </div>
    </div>
  </div>

  <div class="right">
    <!-- Account Dropdown -->
    <div class="dropdown">
      <button class="avatar-btn" id="btnAccount" type="button">
        <div class="avatar-fallback">
          <i class="fa-solid fa-user"></i>
        </div>
      </button>

      <div class="menu" id="accountMenu">
        <a class="menu-item" href="settings.html">
          <i class="fa-solid fa-gear"></i>
          <span>Settings</span>
        </a>

        <button class="menu-item" id="menuLogout">
          <i class="fa-solid fa-right-from-bracket"></i>
          <span>Logout</span>
        </button>
      </div>
    </div>
  </div>
</header>

<!-- ================= STYLE ================= -->
<style>
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 18px;
  border-radius:16px;
  background:rgba(20,40,30,0.65);
  border:1px solid rgba(95,191,122,0.3);
  backdrop-filter: blur(12px);
  box-shadow:0 4px 20px rgba(0,0,0,0.22);
}

.left{ display:flex; align-items:center; gap:12px; }
.right{ display:flex; align-items:center; }

.brand{ display:flex; align-items:center; gap:12px; }

.logo{
  height:42px;
  filter: drop-shadow(0 0 6px rgba(63,155,95,0.5));
}

.brand-text{
  display:flex;
  flex-direction:column;
}

.brand-text b{
  color:#fff;
  font-size:1.1rem;
}

.brand-text span{
  color:#c2dec9;
  font-size:0.85rem;
  margin-top:4px;
}

.icon-btn{
  width:40px;
  height:40px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,0.1);
  background:rgba(0,0,0,0.14);
  color:#c2dec9;
  cursor:pointer;
  transition:0.25s;
}

.icon-btn:hover{
  background:rgba(95,191,122,0.12);
  color:#8fd9a8;
}

.dropdown{ position:relative; }

.avatar-btn{
  width:42px;
  height:42px;
  border-radius:999px;
  border:1px solid rgba(95,191,122,0.35);
  background:rgba(0,0,0,0.14);
  cursor:pointer;
}

.avatar-fallback{
  width:100%;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#8fd9a8;
}

.menu{
  position:absolute;
  top:52px;
  right:0;
  min-width:180px;
  background:rgba(20,40,30,0.95);
  border:1px solid rgba(95,191,122,0.3);
  border-radius:14px;
  backdrop-filter: blur(14px);
  box-shadow:0 12px 30px rgba(0,0,0,0.35);
  padding:8px;
  display:none;
}

.menu.open{ display:block; }

.menu-item{
  width:100%;
  border:0;
  background:transparent;
  color:#c2dec9;
  text-decoration:none;
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px;
  border-radius:12px;
  cursor:pointer;
  font-weight:700;
}

.menu-item:hover{
  background:rgba(95,191,122,0.14);
  color:#8fd9a8;
}
</style>

<!-- ================= SCRIPT ================= -->
<script>
// ===== Dropdown =====
const btnAccount = document.getElementById("btnAccount");
const menu = document.getElementById("accountMenu");

btnAccount.addEventListener("click", (e) => {
  e.stopPropagation();
  menu.classList.toggle("open");
});

document.addEventListener("click", () => {
  menu.classList.remove("open");
});

// ===== Logout =====
document.getElementById("menuLogout").addEventListener("click", () => {
  window.location.href = "index.html";
});

// ===== Back Button Logic =====
const backBtn = document.getElementById("btnBack");
const page = location.pathname.split("/").pop().toLowerCase();

if (page === "connect.html") {
  backBtn.style.display = "none";
}
else if (page === "chat.html") {
  backBtn.onclick = () => window.location.href = "connect.html";
}
else if (page === "analysis.html") {
  backBtn.onclick = () => window.location.href = "chat.html";
}
else if (page === "reports.html") {
  backBtn.onclick = () => window.location.href = "chat.html";
}
else {
  backBtn.style.display = "none";
}
</script>
