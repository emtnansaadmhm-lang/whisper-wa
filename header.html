<!-- Header -->
<header class="topbar">
  <div class="left">
    <!-- Back button (optional) -->
    <button class="icon-btn" id="btnBack" type="button" title="Back">
      <i class="fa-solid fa-arrow-left"></i>
    </button>

    <div class="brand">
      <img src="logo.png" class="logo" alt="Whisper-WA Logo" />
      <div class="brand-text">
        <b>Whisper-WA</b>
        <span id="top-subtitle">Digital Forensics Platform</span>
      </div>
    </div>
  </div>

  <div class="right">
    <!-- Profile / Account dropdown -->
    <div class="dropdown" id="accountDropdown">
      <button class="avatar-btn" id="btnAccount" type="button" aria-haspopup="menu" aria-expanded="false" title="Account">
        <!-- Ù„Ùˆ Ø¹Ù†Ø¯Ùƒ ØµÙˆØ±Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù„Ù„Ø­Ø³Ø§Ø¨: -->
        <!-- <img src="avatar.png" class="avatar" alt="Account" /> -->

        <!-- Ù„Ùˆ Ù…Ø§Ø¹Ù†Ø¯Ùƒ ØµÙˆØ±Ø©ØŒ Ø®Ù„ÙŠÙ‡ Ø£ÙŠÙ‚ÙˆÙ†Ø©: -->
        <div class="avatar-fallback">
          <i class="fa-solid fa-user"></i>
        </div>
      </button>

      <div class="menu" id="accountMenu" role="menu" aria-hidden="true">
        <a class="menu-item" href="settings.html" id="menuSettings" role="menuitem">
          <i class="fa-solid fa-gear"></i>
          <span>Settings</span>
        </a>

        <button class="menu-item" id="menuLang" type="button" role="menuitem">
          <i class="fa-solid fa-globe"></i>
          <span id="menuLangText">AR</span>
        </button>
      </div>
    </div>
  </div>
</header>

<style>
  .topbar{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:12px 18px;
    border-radius:16px;
    background:rgba(20,40,30,0.65);
    border:1px solid rgba(95,191,122,0.3);
    backdrop-filter: blur(12px);
    box-shadow:0 4px 20px rgba(0,0,0,0.22);
    gap:14px;
  }

  .left{ display:flex; align-items:center; gap:12px; }
  .right{ display:flex; align-items:center; gap:10px; }

  .brand{ display:flex; align-items:center; gap:12px; }
  .logo{ height:42px; width:auto; filter: drop-shadow(0 0 6px rgba(63,155,95,0.5)); }

  .brand-text{ display:flex; flex-direction:column; line-height:1.1; }
  .brand-text b{ color:#fff; font-size:1.1rem; }
  .brand-text span{ color:#c2dec9; font-size:0.85rem; margin-top:4px; }

  .icon-btn{
    width:40px; height:40px;
    display:inline-flex; align-items:center; justify-content:center;
    border-radius:999px;
    border:1px solid rgba(255,255,255,0.10);
    background: rgba(0,0,0,0.14);
    color:#c2dec9;
    cursor:pointer;
    transition:0.25s;
  }
  .icon-btn:hover{
    background: rgba(95,191,122,0.12);
    color:#8fd9a8;
    transform: translateY(-1px);
  }

  /* Dropdown */
  .dropdown{ position:relative; }
  .avatar-btn{
    width:42px; height:42px;
    border-radius:999px;
    border:1px solid rgba(95,191,122,0.35);
    background: rgba(0,0,0,0.14);
    cursor:pointer;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    transition:0.25s;
    padding:0;
  }
  .avatar-btn:hover{
    background: rgba(95,191,122,0.12);
    transform: translateY(-1px);
  }

  .avatar{ width:100%; height:100%; border-radius:999px; object-fit:cover; }
  .avatar-fallback{
    width:100%; height:100%;
    border-radius:999px;
    display:flex; align-items:center; justify-content:center;
    color:#8fd9a8;
  }

  .menu{
    position:absolute;
    top:52px;
    inset-inline-end: 0; /* RTL/LTR friendly */
    min-width: 180px;
    background: rgba(20,40,30,0.92);
    border: 1px solid rgba(95,191,122,0.30);
    border-radius: 14px;
    backdrop-filter: blur(14px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.35);
    padding: 8px;
    display:none;
    z-index: 50;
  }
  .menu.open{ display:block; }

  .menu-item{
    width:100%;
    border:0;
    background: transparent;
    color:#c2dec9;
    text-decoration:none;
    display:flex;
    align-items:center;
    gap:10px;
    padding:10px 10px;
    border-radius: 12px;
    cursor:pointer;
    transition:0.2s;
    font-family: inherit;
    font-weight: 800;
    text-align: start;
  }
  .menu-item:hover{
    background: rgba(95,191,122,0.14);
    color:#8fd9a8;
  }

  /* small screens */
  @media (max-width: 520px){
    .brand-text span{ display:none; }
  }
</style>

<script>
  // ===== Back button (optional) =====
  document.getElementById("btnBack").addEventListener("click", () => history.back());

  // ===== Dropdown open/close =====
  const btnAccount = document.getElementById("btnAccount");
  const menu = document.getElementById("accountMenu");

  function setMenu(open){
    menu.classList.toggle("open", open);
    btnAccount.setAttribute("aria-expanded", open ? "true" : "false");
    menu.setAttribute("aria-hidden", open ? "false" : "true");
  }

  btnAccount.addEventListener("click", (e) => {
    e.stopPropagation();
    setMenu(!menu.classList.contains("open"));
  });

  document.addEventListener("click", () => setMenu(false));
  menu.addEventListener("click", (e) => e.stopPropagation());

  // ===== Language toggle (Ø±Ø¨Ø·ÙŠÙ‡ Ù…Ø¹ Ù†Ø¸Ø§Ù…Ùƒ) =====
  // Ø¥Ø°Ø§ Ø¹Ù†Ø¯Ùƒ function applyLang Ø£Ùˆ toggleLanguage ÙÙŠ Ø§Ù„ØµÙØ­Ø©ØŒ Ø§Ø³ØªØ¯Ø¹ÙŠÙ‡Ø§ Ù‡Ù†Ø§.
  const menuLang = document.getElementById("menuLang");
  const menuLangText = document.getElementById("menuLangText");

  // Ù…Ø«Ø§Ù„ Ø¨Ø³ÙŠØ·: ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ documentElement.lang
  menuLang.addEventListener("click", () => {
    const html = document.documentElement;
    const current = html.lang || "ar";
    const next = (current === "ar") ? "en" : "ar";

    html.lang = next;
    html.dir = (next === "ar") ? "rtl" : "ltr";

    // Ø§Ù„Ù„ÙŠ Ù…ÙƒØªÙˆØ¨ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© (ÙŠØ¹Ø±Ø¶ Ø§Ù„Ù„ØºØ© Ø§Ù„Ù„ÙŠ Ø¨ØªØ±ÙˆØ­ÙŠÙ† Ù„Ù‡Ø§)
    menuLangText.textContent = (next === "ar") ? "AR" : "EN";

    // ðŸ”¥ Ù…Ù‡Ù…: Ù‡Ù†Ø§ Ø§Ø³ØªØ¯Ø¹ÙŠ Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø­Ù‚Ùƒ Ø¹Ø´Ø§Ù† ØªØªØ±Ø¬Ù… ÙƒÙ„ Ø§Ù„ØµÙØ­Ø©
    // Ø¥Ø°Ø§ Ø¯Ø§Ù„ØªÙƒ Ø§Ø³Ù…Ù‡Ø§ applyLang(next) Ø§Ø³ØªØ®Ø¯Ù…ÙŠ:
    // applyLang(next);

    // Ø£Ùˆ Ø¥Ø°Ø§ Ø¹Ù†Ø¯Ùƒ toggleLanguage():
    // toggleLanguage();

    setMenu(false);
  });

  // Init label
  (() => {
    const html = document.documentElement;
    const current = html.lang || "ar";
    const next = (current === "ar") ? "en" : "ar";
    menuLangText.textContent = (next === "ar") ? "AR" : "EN";
  })();
</script>
